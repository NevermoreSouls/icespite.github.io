"use strict";$(function(){for(var a=void 0!==GLOBAL_CONFIG.Snackbar,h=0<$("#sidebar .sidebar-toc__content").children().length,s=void 0!==$("#search_button").outerWidth()?$("#search_button").outerWidth():0,i=$("#blog_name").width(),o=0,e=0;e<$("#page-header .menus_item").length;e++)o+=$("#page-header .menus_item").eq(e).outerWidth();function t(e){var t;1===e?t=i+s+o>$("#page-header").width()-300:2===e&&(t=i+s+o>$("#page-header").width()),t?n():($("#page-header .toggle-menu").removeClass("is_visible"),$("#page-header .menus,.search span").removeClass("is_invisible"))}function n(){$("#page-header .toggle-menu").addClass("is_visible"),$("#page-header .menus,.search span").addClass("is_invisible")}function r(){$("#page-header").addClass("open-sidebar"),$("body").animate({paddingLeft:300},400),$("#sidebar").css("transform","translateX(300px)"),$("#toggle-sidebar").css({transform:"rotateZ(180deg)",color:"#99a9bf",opacity:"1"})}t(2),$("#page-header").css({opacity:"1",animation:"headerNoOpacity 1s"}),$(window).bind("resize",function(){768<window.innerWidth?t(2):n()}),GLOBAL_CONFIG.isHome&&(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)||$(".full_page").css("background-attachment","fixed")),GLOBAL_CONFIG.isPost&&($("#sidebar").hasClass("auto_open")&&h&&($("#toggle-sidebar").addClass("on"),setTimeout(function(){$("#toggle-sidebar").addClass("on"),r()},400),t(1)),h?$("#toggle-sidebar").css("opacity","1"):$("#sidebar,#toggle-sidebar").css("display","none"),0===$("#mobile-sidebar-toc .sidebar-toc__content").children().length&&$("#mobile-sidebar-toc,#mobile-toc-button").css("display","none")),$("#toggle-sidebar").on("click",function(){if(!isMobile()&&$("#sidebar").is(":visible")){var e=$(this).hasClass("on");e?$(this).removeClass("on"):$(this).addClass("on"),e?($("#page-header").removeClass("open-sidebar"),$("body").animate({paddingLeft:0},400),$("#sidebar").css("transform","translateX(0px)"),$("#toggle-sidebar").css({transform:"rotateZ(0deg)",color:"#1F2D3D",opacity:"1"}),setTimeout(function(){t(2)},500)):(t(1),r())}}),$(".scroll-down").on("click",function(){scrollTo("#content-outer")}),$("#bookmark-it").on("click",function(){if(window.sidebar&&window.sidebar.addPanel)window.sidebar.addPanel(document.title,window.location.href,"");else if(window.external&&"AddFavorite"in window.external)window.external.AddFavorite(location.href,document.title);else{if(window.opera&&window.print)return this.title=document.title,!0;if(a){var e=GLOBAL_CONFIG.Snackbar.bookmark.message_prev+" "+(-1!==navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL")+"+ D "+GLOBAL_CONFIG.Snackbar.bookmark.message_next+".";snackbarShow(e)}else alert(GLOBAL_CONFIG.bookmark.message_prev+" "+(-1!==navigator.userAgent.toLowerCase().indexOf("mac")?"Command/Cmd":"CTRL")+"+ D "+GLOBAL_CONFIG.bookmark.message_next+".")}}),$(document).on("click",".code-area-wrap .fa-clipboard",function(){var e=window.getSelection(),t=document.createRange();t.selectNodeContents($(this).parent().siblings("figure").find(".code pre")[0]),e.removeAllRanges(),e.addRange(t);e.toString();!function(t){if(document.queryCommandSupported&&document.queryCommandSupported("copy"))try{document.execCommand("copy"),a?snackbarShow(GLOBAL_CONFIG.copy.success):$(t).prev(".copy-notice").text(GLOBAL_CONFIG.copy.success).animate({opacity:1,right:30},450,function(){setTimeout(function(){$(t).prev(".copy-notice").animate({opacity:0,right:0},650)},400)})}catch(e){if(!a)return $(t).prev(".copy-notice").text(GLOBAL_CONFIG.copy.error).animate({opacity:1,right:30},650,function(){setTimeout(function(){$(t).prev(".copy-notice").animate({opacity:0,right:0},650)},400)});snackbarShow(GLOBAL_CONFIG.copy.success)}else a?snackbarShow(GLOBAL_CONFIG.copy.noSupport):$(t).prev(".copy-notice").text(GLOBAL_CONFIG.copy.noSupport)}(this),e.removeAllRanges()}),$(document).on("click",".code-area-wrap .code-expand",function(){var e=$(this).parent().next();$(this).hasClass("code-closed")?(e.slideDown(300),$(this).removeClass("code-closed")):(e.slideUp(300),$(this).addClass("code-closed"))});var c=GLOBAL_CONFIG.medium_zoom;if(GLOBAL_CONFIG.fancybox)$().fancybox({selector:"[data-fancybox]",loop:!0,transitionEffect:"slide",protect:!0,buttons:["slideShow","fullScreen","thumbs","close"]});else if(c){var l=mediumZoom(document.querySelectorAll(":not(a)>img"));l.on("open",function(e){var t="dark"===$(document.documentElement).attr("data-theme")?"#121212":"#fff";l.update({background:t})})}function d(e){$("body").css("overflow","hidden"),$("#body-wrap").css("transform","translateX(-250px)"),$("#page-header").css("transform","translateX(-250px)"),$("#page-header.fixed.visible").css("transform","translate3d(-250px, 100%, 0)"),$("#rightside").css("transform","translateX(-288px)"),$("#menu_mask").fadeIn(),"menu"===e&&($(".toggle-menu").removeClass("close").addClass("open"),$("#mobile-sidebar-menus").css({transform:"translateX(-254px)"})),"toc"===e&&($("#mobile-toc-button").removeClass("close").addClass("open"),$("#mobile-sidebar-toc").css("transform","translateX(-254px)"))}function u(e){$("body").css("overflow",""),$("#body-wrap").css("transform",""),$("#page-header").css("transform",""),$("#page-header.fixed.visible").css("transform",""),$("#rightside").css("transform","translateX(-38px)"),$("#menu_mask").fadeOut(),"menu"===e&&($(".toggle-menu").removeClass("open").addClass("close"),$("#mobile-sidebar-menus").css({transform:"translateX(0)"})),"toc"===e&&($("#mobile-toc-button").removeClass("open").addClass("close"),$("#mobile-sidebar-toc").css("transform",""))}$(".toggle-menu").on("click",function(){$(".toggle-menu").hasClass("close")&&(d("menu"),$("#toggle-sidebar").hasClass("on")&&($("body").css("padding-left","0"),$("#sidebar").css("transform","")))}),$("#mobile-toc-button").on("click",function(){$("#mobile-toc-button").hasClass("close")&&d("toc")}),$("#menu_mask").on("click touchstart",function(e){$(".toggle-menu").hasClass("open")&&(u("menu"),$("#toggle-sidebar").hasClass("on")&&setTimeout(function(){r()},600)),$("#mobile-toc-button").hasClass("open")&&u("toc")}),$(window).on("resize",function(e){$(".toggle-menu").is(":visible")||$(".toggle-menu").hasClass("open")&&u("menu"),$("#mobile-toc-button").is(":visible")||$("#mobile-toc-button").hasClass("open")&&u("toc")}),$("#mobile-sidebar-toc a").on("click",function(){u("toc")});var m=0;function g(e){var t=parseFloat($("body").css("font-size")),a=parseFloat($("pre").css("font-size")),s=parseFloat($("code").css("font-size"));"plus"===e?($("body").css("font-size",t+1),$("pre").css("font-size",a+1),$("code").css("font-size",s+1)):($("body").css("font-size",t-1),$("pre").css("font-size",a-1),$("code").css("font-size",s-1))}$(".toc-child").hide(),$(window).scroll(throttle(function(e){var t,a,s,i,o,n,r,c=$(this).scrollTop();!isMobile()&&h&&(t=c,a=$("#content-outer").height(),s=$(window).height(),i=s<a?a-s:$(document).height()-s,o=t/i,n=Math.round(100*o),r=100<n?100:n,$(".progress-num").text(r),$(".sidebar-toc__progress-bar").animate({width:r+"%"},100),function(t){if(0===$(".toc-link").length)return;var e=$("#post-content").find("h1,h2,h3,h4,h5,h6"),a="";e.each(function(){var e=$(this);t>e.offset().top-25&&(a="#"+$(this).attr("id"))}),""===a&&($(".toc-link").removeClass("active"),$(".toc-child").hide());var s=$(".toc-link.active");if(a&&s.attr("href")!==a){!function(e){window.history.replaceState&&e!==window.location.hash&&window.history.replaceState(void 0,void 0,e)}(a),$(".toc-link").removeClass("active");var i=$('.toc-link[href="'+a+'"]');i.addClass("active");var o=i.parents(".toc-child"),n=0<o.length?o.last():i;!function(e){if(e.is(":visible"))return;e.fadeIn(400)}(n.closest(".toc-item").find(".toc-child")),n.closest(".toc-item").siblings(".toc-item").find(".toc-child").hide()}}(c),function(e){if($(".toc-link").hasClass("active")){var t=$(".active").offset().top,a=$("#sidebar").scrollTop();t>e+$(window).height()-50?$("#sidebar").scrollTop(a+100):t<e+50&&$("#sidebar").scrollTop(a-100)}}(c));var l,d,u=(d=m<(l=c),m=l,d);56<c?(u?$("#page-header").hasClass("visible")&&$("#page-header").removeClass("visible"):$("#page-header").hasClass("visible")||$("#page-header").addClass("visible"),$("#page-header").addClass("fixed"),"0"===$("#rightside").css("opacity")&&$("#rightside").animate({},function(){$(this).css({opacity:"1",transform:"translateX(-38px)"})})):(0===c&&$("#page-header").removeClass("fixed").removeClass("visible"),$("#rightside").animate({},function(){$("#rightside").css({opacity:"",transform:""})}))},300)),$("#go-up").on("click",function(){scrollTo("body")}),$(".toc-link").on("click",function(e){var t;e.preventDefault(),t=$(this).attr("href"),scrollTo(t)}),$("#readmode").click(function(){var e="dark"===$(document.documentElement).attr("data-theme"),t=""===$(document.documentElement).attr("data-theme");$("body").toggleClass("read-mode"),$("#to_comment").toggleClass("is_invisible"),t&&$(document.documentElement).attr("data-theme","dark"),e&&$(document.documentElement).attr("data-theme","")}),$("#font_plus").click(function(){g("plus")}),$("#font_minus").click(function(){g("minus")}),$(".menus-expand").on("click",function(){$(this).hasClass("menus-closed")?($(this).parents(".menus_item").find(".menus_item_child").slideDown(),$(this).removeClass("menus-closed")):($(this).parents(".menus_item").find(".menus_item_child").slideUp(),$(this).addClass("menus-closed"))}),$("#rightside_config").on("click",function(){$("#rightside-config-hide").hasClass("rightside-in")?$("#rightside-config-hide").removeClass("rightside-in").addClass("rightside-out"):$("#rightside-config-hide").removeClass("rightside-out").addClass("rightside-in")});var p=GLOBAL_CONFIG.copyright;function f(){$("#darkmode").removeClass("fa-moon-o").addClass("fa-sun-o")}function b(){$("#darkmode").removeClass("fa-sun-o").addClass("fa-moon-o")}if(void 0!==p&&(document.body.oncopy=function(e){e.preventDefault();var t=void 0,a=window.getSelection(0).toString();return t=45<a.length?a+"\n\n\n"+p.languages.author+"\n"+p.languages.link+"\n"+p.languages.source+"\n"+p.languages.info:a,e.clipboardData?e.clipboardData.setData("text",t):window.clipboardData.setData("text",t)}),$(".justified-gallery").length&&($(".justified-gallery > p > .fancybox").unwrap(),$("head").append('<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">'),loadScript("https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js",function(){"function"==typeof $.fn.justifiedGallery&&$(".justified-gallery").justifiedGallery({rowHeight:220,margins:4})})),"undefined"!=typeof autoChangeMode&&("1"!==autoChangeMode&&"2"!==autoChangeMode||("dark"===Cookies.get("theme")?f:b)()),$("#darkmode").click(function(){"light"==("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(f(),activateDarkMode(),Cookies.set("theme","dark",{expires:2}),a&&snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(b(),activateLightMode(),Cookies.set("theme","light",{expires:2}),a&&snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day))}),GLOBAL_CONFIG.runtime){var v,C=$("#webinfo-runtime-count").attr("start_date"),y=function(){var e=new Date(C),t=((new Date).getTime()-e.getTime())/864e5,a=Math.floor(t);$(".webinfo-runtime-count").text(a+" "+GLOBAL_CONFIG.runtime_unit)};y(),clearInterval(v),v=setInterval(y,1e4)}if(void 0===GLOBAL_CONFIG.localSearch&&void 0!==GLOBAL_CONFIG.algolia){$("a.social-icon.search").on("click",function(){k(),$(".ais-search-box--input").focus()}),$(".search-mask, .search-close-button").on("click",O);var _=GLOBAL_CONFIG.algolia;if(!(_.appId&&_.apiKey&&_.indexName))return console.error("Algolia setting is invalid!");var w=instantsearch({appId:_.appId,apiKey:_.apiKey,indexName:_.indexName,searchParameters:{hitsPerPage:_.hits.per_page||10},searchFunction:function(e){$("#algolia-search-input").find("input").val()&&e.search()}});w.addWidget(instantsearch.widgets.searchBox({container:"#algolia-search-input",reset:!1,magnifier:!1,placeholder:GLOBAL_CONFIG.algolia.languages.input_placeholder})),w.addWidget(instantsearch.widgets.hits({container:"#algolia-hits",templates:{item:function(e){return'<a href="'+(e.permalink?e.permalink:GLOBAL_CONFIG.root+e.path)+'" class="algolia-hit-item-link">'+e._highlightResult.title.value+"</a>"},empty:function(e){return'<div id="algolia-hits-empty">'+GLOBAL_CONFIG.algolia.languages.hits_empty.replace(/\$\{query}/,e.query)+"</div>"}},cssClasses:{item:"algolia-hit-item"}})),w.addWidget(instantsearch.widgets.stats({container:"#algolia-stats",templates:{body:function(e){return"<hr>"+GLOBAL_CONFIG.algolia.languages.hits_stats.replace(/\$\{hits}/,e.nbHits).replace(/\$\{time}/,e.processingTimeMS)+'<span class="algolia-logo pull_right">  <img src="'+GLOBAL_CONFIG.root+'img/algolia.svg" alt="Algolia" /></span>'}}})),w.addWidget(instantsearch.widgets.pagination({container:"#algolia-pagination",scrollTo:!1,showFirstLast:!1,labels:{first:'<i class="fa fa-angle-double-left"></i>',last:'<i class="fa fa-angle-double-right"></i>',previous:'<i class="fa fa-angle-left"></i>',next:'<i class="fa fa-angle-right"></i>'},cssClasses:{root:"pagination",item:"pagination-item",link:"page-number",active:"current",disabled:"disabled-item"}})),w.start()}if(void 0!==GLOBAL_CONFIG.localSearch&&void 0===GLOBAL_CONFIG.algolia){$("a.social-icon.search").on("click",function(){var e=!1;k(),$("#local-search-input input").focus(),e||(L(GLOBAL_CONFIG.localSearch.path),e=!0)}),$(".search-mask, .search-close-button").on("click",O);var L=function(e){$.ajax({url:GLOBAL_CONFIG.root+e,dataType:"xml",success:function(e){var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),a=$("#local-search-input input")[0],s=$("#local-hits")[0];a.addEventListener("input",function(){var r='<div class="search-result-list">',c=this.value.trim().toLowerCase().split(/[\s]+/);if(s.innerHTML="",this.value.trim().length<=0)$(".local-search-stats__hr").hide();else{var l=0;t.forEach(function(e){var a=!0,s=e.title.trim().toLowerCase(),i=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),t=e.url,o=-1,n=-1;""!==s&&""!==i&&c.forEach(function(e,t){o=s.indexOf(e),n=i.indexOf(e),o<0&&n<0?a=!1:n<0&&(n=0)}),a&&(r+='<div class="local-search__hit-item"><a href="'+t+'" class="search-result-title">'+s+"</a></div>",l+=1,$(".local-search-stats__hr").show())}),0===l&&(r+='<div id="local-search__hits-empty">'+GLOBAL_CONFIG.localSearch.languages.hits_empty.replace(/\$\{query}/,this.value.trim())+"</div>"),s.innerHTML=r}})}})}}function k(){$("body").css("width","100%"),$("body").css("overflow","hidden"),$(".search-dialog").css({display:"block"}),$(".search-mask").fadeIn(),document.addEventListener("keydown",function e(t){"Escape"===t.code&&(O(),document.removeEventListener("keydown",e))})}function O(){$("body").css("width",""),$("body").css("overflow",""),$(".search-dialog").css({animation:"search_close .5s"}),$(".search-dialog").animate({},function(){setTimeout(function(){$(".search-dialog").css({animation:"",display:"none"})},500)}),$(".search-mask").fadeOut()}GLOBAL_CONFIG.baiduPush&&function(){var e=document.createElement("script"),t=window.location.protocol.split(":")[0];e.src="https"===t?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a)}()});